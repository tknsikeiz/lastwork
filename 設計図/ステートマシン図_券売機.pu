@startuml 券売機のステートマシン図
state タイトル画面 {
  [*] --> 表示
  表示 --> 商品選択画面 : Enter
  表示 --> 管理画面 : ESC
  表示 --> [*] : q (終了)
}
state 商品選択画面 {
  [*] --> 商品一覧表示
  商品一覧表示 --> 商品一覧表示 : 商品番号入力
  商品一覧表示 --> 購入確認画面 : c (支払いへ)
  商品一覧表示 --> 商品一覧表示 : 無効な入力
}
state 購入確認画面 {
  [*] --> 確認表示
  確認表示 --> 支払い処理 : 現金投入
}
state 支払い処理 {
  [*] --> 払い戻し計算
  払い戻し計算 --> タイトル画面 : 購入完了 (Enter)
  払い戻し計算 --> タイトル画面 : 金額不足 (エラー)
}
state 管理画面 {
  [*] --> 管理メニュー表示
  管理メニュー表示 --> タイトル画面 : 3 (終了)
  管理メニュー表示 --> 売上リセット : 1
  state 売上リセット {
    [*] --> リセット処理
    リセット処理 --> 管理メニュー表示
  }
  管理メニュー表示 --> 価格変更 : 2
  state 価格変更 {
    [*] --> 変更処理
    変更処理 --> 管理メニュー表示
  }
}
タイトル画面 --> [*] : q (終了)
@enduml